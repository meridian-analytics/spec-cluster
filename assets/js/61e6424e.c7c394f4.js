"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2646],{2208:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>_,contentTitle:()=>N,default:()=>U,frontMatter:()=>T,metadata:()=>Y,toc:()=>$});var n=s(1085),o=s(1184),r=s(4041),i=s(7480),a=s(6195),c=s(771),l=s(9575),d=s(7502),m=s(4357),u=s(4190),h=s(2254),p=s(9724),x=s(3900);const f=["className","component"];var g=s(4636),j=s(8334),v=s(8001);const w=(0,s(6310).A)("MuiBox",["root"]),A=(0,j.A)(),S=function(e={}){const{themeId:t,defaultTheme:s,defaultClassName:o="MuiBox-root",generateClassName:i}=e,a=(0,u.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(h.A);return r.forwardRef((function(e,r){const c=(0,x.A)(s),u=(0,p.A)(e),{className:h,component:g="div"}=u,j=(0,d.A)(u,f);return(0,n.jsx)(a,(0,l.A)({as:g,ref:r,className:(0,m.A)(h,i?i(o):o),theme:t&&c[t]||c},j))}))}({themeId:v.A,defaultTheme:A,defaultClassName:w.root,generateClassName:g.A.generate}),b=S;var C=s(1899),y=s(9e3);function k(){const{focusedItem:e,hasFocus:t,unsetFocus:s}=i.BD.useContext();return e?(0,n.jsx)(c.A,{open:t,onClose:s,children:(0,n.jsxs)(b,{component:"div",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:C.A[50],border:"1px solid #000",borderRadius:"2px",boxShadow:24,p:4,overflow:"hidden"},children:[(0,n.jsx)(y.A,{variant:"h6",component:"h2",fontWeight:"bold",children:"Spectrogram Details"}),(0,n.jsx)("img",{alt:"spectrogram",src:`../../website/static/spectrogram_plots/${e.filename.replace(".wav","")}.png`,style:{maxWidth:"100%",maxHeight:"300px",margin:"16px 0"}}),(0,n.jsx)("pre",{style:{backgroundColor:"#f4f4f4",padding:"16px",borderRadius:"4px"},children:`filename: ${e.filename}\ndim1: ${e.dim1}\ndim2: ${e.dim2}\ndim3: ${e.dim3}`})]})}):null}var M=s(3842);const I=a.Ik({filename:a.Yj(),dim1:a.au.number(),dim2:a.au.number(),dim3:a.au.number(),size:a.ai().optional().default(.9),color:a.Yj().optional().default("Blue"),width:a.ai().optional().default(5),height:a.ai().optional().default(5),label:a.Yj().optional().default(""),flocation:a.Yj(),shape:a.Yj().optional().default("Sphere")});function P(e){const t=a.YO(I).safeParse(e);if(t.success)return t.data;throw new Error(t.error.message)}function D(e){return r.useEffect((()=>{console.error(e.error)}),[e.error]),(0,n.jsxs)("div",{role:"alert",children:[(0,n.jsx)("p",{children:"Something went wrong:"}),(0,n.jsx)("pre",{style:{color:"red"},children:e.error.message}),(0,n.jsx)("button",{type:"button",onClick:e.resetErrorBoundary,children:"Try again"})]})}function z(e){return(0,n.jsx)(i.E0.Provider,{data:P(M),children:(0,n.jsx)(i.cn.Kq,{children:(0,n.jsx)(i.LN.Provider,{children:(0,n.jsxs)(i.BD.Provider,{children:[(0,n.jsx)(F,{baseUrl:e.baseUrl}),(0,n.jsx)(i.KA,{})]})})})})}function F(e){const{spectrograms:t}=i.E0.useContext(),{setFocusedItem:s}=i.BD.useContext();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{}),(0,n.jsx)(i.Z5,{renderMode:"image",spectrograms:Array.from(t.values()),controls:{minAzimuthAngle:-Math.PI/4,maxAzimuthAngle:Math.PI/4,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI-Math.PI/6,maxDistance:120,minDistance:5},onSpecClick:e=>{s(e)},baseUrl:e.baseUrl})]})}var E=s(5769),B=s(7350);const T={title:"Spec Visualization",sidebar_position:1},N=void 0,Y={id:"examples/spec-visualization",title:"Spec Visualization",description:"This example demonstrates how clustered spectrogram images can be rendered in the 3D space using the spec-cluster package. Users can focus on individual spectrograms, view their details, and interact with them in a 3D scene.",source:"@site/docs/examples/spec-visualization.mdx",sourceDirName:"examples",slug:"/examples/spec-visualization",permalink:"/spec-cluster/docs/examples/spec-visualization",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Spec Visualization",sidebar_position:1},sidebar:"mainSidebar",previous:{title:"Focus",permalink:"/spec-cluster/docs/modules/contexts/focus"},next:{title:"Shape Visualization",permalink:"/spec-cluster/docs/examples/shape-visualization"}},_={},$=[{value:"Key Features",id:"key-features",level:2},{value:"Focus Context",id:"focus-context",level:3},{value:"Focus Modal",id:"focus-modal",level:3},{value:"Scene Component",id:"scene-component",level:3},{value:"Configurator Context &amp; Interface Component",id:"configurator-context--interface-component",level:3},{value:"Error Handling",id:"error-handling",level:3}];function R(e){const t={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["This example demonstrates how clustered spectrogram images can be rendered in the 3D space using the ",(0,n.jsx)(t.code,{children:"spec-cluster"})," package. Users can focus on individual spectrograms, view their details, and interact with them in a 3D scene.\nThe demo utilizes various contexts to manage interactivity, such as focusing on specific spectrograms and adjusting the position of spectrograms in the 3D scene."]}),"\n","\n",(0,n.jsx)(E.A,{fallback:(0,n.jsx)(t.div,{children:"Loading..."}),children:e=>(0,n.jsx)("div",{className:"live-example-wrapper",children:(0,n.jsx)(B.tH,{FallbackComponent:D,children:(0,n.jsx)(z,{baseUrl:e("/spectrogram_plots")})})})}),"\n",(0,n.jsx)(t.h2,{id:"key-features",children:"Key Features"}),"\n",(0,n.jsx)(t.h3,{id:"focus-context",children:"Focus Context"}),"\n",(0,n.jsx)(t.p,{children:"The Focus context manages which spectrogram is in focus when the user interacts with the 3D scene. Clicking on a spectrogram triggers this focus functionality, allowing the user to view detailed information about that spectrogram."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["The focus context is provided via ",(0,n.jsx)(t.code,{children:"Focus.Provider"})," and handles which item is focused by setting the clicked spectrogram as the ",(0,n.jsx)(t.strong,{children:"focused item"}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:'export const Provider = (props: ProviderProps) => {\nconst [focusedItem, setFocusedItem] = React.useState(defaultContext.focusedItem)\n\nconst unsetFocus: Context["unsetFocus"] = () => {\n  setFocusedItem(null)\n}\n\nconst hasFocus: Context["hasFocus"] = focusedItem != null}\n'})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Once clicked, the spectrogram's details are displayed through a custom UI component, ",(0,n.jsx)(t.a,{href:"#focus-modal",children:(0,n.jsx)("u",{children:"FocusModal"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"focus-modal",children:"Focus Modal"}),"\n",(0,n.jsx)(t.p,{children:"The Focus modal is a custom component created specifically for this demo. It displays detailed information about a spectrogram when it is clicked. The modal retrieves data from the focused item in the focus context and dynamically updates whenever a new spectrogram is selected."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"spec-demo-focus",src:s(8078).A+"",width:"3360",height:"1858"})}),"\n",(0,n.jsx)(t.h3,{id:"scene-component",children:"Scene Component"}),"\n",(0,n.jsxs)(t.p,{children:["The Scene component renders the spectrograms in 3D space and handles user interactions with the scene. In this demo, the spectrograms are displayed as images by setting ",(0,n.jsx)(t.code,{children:"renderMode"})," to ",(0,n.jsx)(t.code,{children:"image"}),"."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"renderMode:"})," Set to ",(0,n.jsx)(t.code,{children:"image"})," for this demo to render spectrograms visually as images. The ",(0,n.jsx)(t.code,{children:"dot"})," mode is covered in the ",(0,n.jsx)(t.a,{href:"shape-visualization",children:"Shape visualization example"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"onSpecClick:"})," When a user clicks a spectrogram, this event is tied to the focus functionality, triggering the focus on the clicked item."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"controls:"})," Adjustable camera and navigation controls allow users to zoom, pan, and rotate the 3D view. These controls can be modified by altering the ",(0,n.jsx)(t.code,{children:"controls"})," prop:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"<Scene\n  ...\n  controls={{\n    minAzimuthAngle: -Math.PI / 4,\n    maxAzimuthAngle: Math.PI / 4,\n    minPolarAngle: Math.PI / 6,\n    maxPolarAngle: Math.PI - Math.PI / 6,\n    maxDistance: 120,\n    minDistance: 5,\n  }}\n  ...\n/>\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"configurator-context--interface-component",children:"Configurator Context & Interface Component"}),"\n",(0,n.jsx)(t.p,{children:"The configurator context works with the interface component to allow users to adjust the position of the spectrograms in the 3D space using sliders. These sliders modify the x, y, and z axes."}),"\n",(0,n.jsxs)(t.p,{children:["For more details,refer to the ",(0,n.jsx)(t.a,{href:"/spec-cluster/docs/modules/contexts/configurator",children:"Configurator context"})," and ",(0,n.jsx)(t.a,{href:"/spec-cluster/docs/modules/components/interface",children:"Interface component"})," documentation."]}),"\n",(0,n.jsx)(t.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,n.jsxs)(t.p,{children:["Basic error handling is implemented using ",(0,n.jsx)(t.code,{children:"react-error-boundary"}),". If an error occurs (e.g., misformatted data), a simple error message is shown, allowing the user to reload the demo."]})]})}function U(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(R,{...e})}):R(e)}},7480:(e,t,s)=>{s.d(t,{iG:()=>i,cn:()=>n,BD:()=>r,KA:()=>S,Z5:()=>T,LN:()=>o,E0:()=>a});var n={};s.r(n),s.d(n,{Kq:()=>w,NT:()=>A});var o={};s.r(o),s.d(o,{Provider:()=>I,useContext:()=>P});var r={};s.r(r),s.d(r,{Provider:()=>_,useContext:()=>$});var i={};s.r(i),s.d(i,{Kq:()=>L});var a={};s.r(a),s.d(a,{Provider:()=>K,useContext:()=>H});var c=s(3677),l=s(1899),d=s(7679),m=s(6210),u=s(9e3),h=s(3193),p=s(4041);function x(e,t,s){!function(e,t){if(!e)throw Error(`Invariant violation: ${t??"truthy value expected"}`)}(Object.values(t).includes(e),`"${e}" is not a member of ${s??"enum"}`)}var f=s(1085);let g=function(e){return e[e.image=0]="image",e[e.dot=1]="dot",e}({});const j={renderMode:g.image,scaleX:1,scaleY:1,scaleZ:1,setRenderMode:()=>{throw Error("setRenderMode called outside of context provider")},setScaleX:()=>{throw Error("setScaleX called outside of context provider")},setScaleY:()=>{throw Error("setScaleY called outside of context provider")},setScaleZ:()=>{throw Error("setScaleZ called outside of context provider")}},v=p.createContext(j),w=e=>{const[t,s]=p.useState(j.renderMode),[n,o]=p.useState(j.scaleX),[r,i]=p.useState(j.scaleY),[a,c]=p.useState(j.scaleZ);return(0,f.jsx)(v.Provider,{value:{renderMode:t,setRenderMode:e=>{x(e,g,"RenderMode"),s(e)},scaleX:n,setScaleX:o,scaleY:r,setScaleY:i,scaleZ:a,setScaleZ:c},children:e.children})},A=()=>p.useContext(v);function S(e){const{scaleX:t,setScaleX:s,scaleY:n,setScaleY:o,scaleZ:r,setScaleZ:i}=A();return(0,f.jsx)(c.A,{sx:{backgroundColor:l.A[800],borderRadius:3,color:"white",padding:3,position:"absolute",right:0,spacing:3,top:0,margin:2,...e.sx},children:(0,f.jsxs)(d.A,{children:[(0,f.jsx)(m.A,{sx:{color:"white"},children:"Scale Axes"}),(0,f.jsx)(u.A,{gutterBottom:!0,children:" x-axis"}),(0,f.jsx)(h.Ay,{sx:{width:"250px"},min:1,max:10,size:"small",valueLabelDisplay:"auto",value:t,onChange:(e,t)=>s(Array.isArray(t)?t[0]:t)}),(0,f.jsx)(u.A,{gutterBottom:!0,children:" y-axis"}),(0,f.jsx)(h.Ay,{sx:{width:"250px"},min:1,max:5,size:"small",valueLabelDisplay:"auto",value:n,onChange:(e,t)=>o(Array.isArray(t)?t[0]:t)}),(0,f.jsx)(u.A,{gutterBottom:!0,children:" z-axis"}),(0,f.jsx)(h.Ay,{sx:{width:"250px"},min:1,max:5,size:"small",valueLabelDisplay:"auto",value:r,onChange:(e,t)=>i(Array.isArray(t)?t[0]:t)})]})})}var b=s(8641),C=s(321),y=s(8916);const k={selection:new Set,setSelection:()=>{throw Error("setSelection called outside of context provider")},updateSelection:()=>{throw Error("updateSelection called outside of context provider")},clearSelection:()=>{throw Error("clearSelection called outside of context provider")}},M=p.createContext(k),I=e=>{const[t,s]=p.useState(k.selection);return(0,f.jsx)(M.Provider,{value:{selection:t,setSelection:s,updateSelection:e=>{const n=new Set(t);for(const t of e)n.has(t)?n.delete(t):n.add(t);s(n)},clearSelection:()=>{s(new Set)}},children:e.children})},P=()=>p.useContext(M);var D=s(675),z=s(5062);function F(e){const t=function(e,t){if("Cube"===e)return{type:"Box",args:[1.5*t,1.5*t,1.5*t]};if("Pyramid"===e)return{type:"Cone",args:[t,2*t,4]};if("Sphere"===e)return{type:"Sphere",args:[t,64,32]};throw Error(`Invalid shape type ${e}`)}(e.shape,e.size);return(0,f.jsxs)("group",{position:e.position,onClick:e.onClick,children:[e.isSelected&&(0,f.jsxs)("mesh",{scale:[1.3,1.3,1.3],children:["Sphere"===t.type?(0,f.jsx)("sphereGeometry",{args:t.args}):"Box"===t.type?(0,f.jsx)("boxGeometry",{args:t.args}):"Cone"===t.type?(0,f.jsx)("coneGeometry",{args:t.args}):null,(0,f.jsx)("meshBasicMaterial",{color:"black",side:z.BackSide})]}),(0,f.jsxs)("mesh",{userData:{id:e.id},children:["Sphere"===t.type?(0,f.jsx)("sphereGeometry",{args:t.args}):"Box"===t.type?(0,f.jsx)("boxGeometry",{args:t.args}):"Cone"===t.type?(0,f.jsx)("coneGeometry",{args:t.args}):null,(0,f.jsx)("meshStandardMaterial",{color:e.color})]}),e.showID&&(0,f.jsx)(D.E,{children:(0,f.jsx)("div",{children:e.label})})]})}var E=s(5394);function B(e){const t=(0,E.zo)(e.url);return(0,f.jsxs)("mesh",{position:e.position,onClick:e.onClick,userData:{id:e.id},children:[(0,f.jsx)("planeGeometry",{args:e.size}),(0,f.jsx)("meshStandardMaterial",{map:t}),e.showID&&(0,f.jsx)(D.E,{children:(0,f.jsx)("div",{children:e.label})})]})}function T(e){const{scaleX:t,scaleY:s,scaleZ:n}=A(),{selection:o,updateSelection:r,clearSelection:i}=P();return(0,f.jsx)(y.Hl,{camera:{position:e.camera?.position??[0,0,100]},onPointerMissed:i,children:(0,f.jsxs)(p.Suspense,{fallback:null,children:[(0,f.jsx)("directionalLight",{position:e.light?.position??[0,0,2]}),(0,f.jsx)("ambientLight",{}),(0,f.jsxs)(b.l,{box:!0,multiple:!0,onChangePointerUp:e=>{r(e.map((e=>e.userData.id??"")))},children:["image"===e.renderMode&&e.spectrograms.map((r=>(0,f.jsx)(B,{url:`${e.baseUrl??""}/${r.filename.replace(".wav","")}.png`,position:[r.dim1*t,r.dim2*s,r.dim3*n],id:r.filename,size:[r.width,r.height,64,64],label:r.label,showID:o.has(r.filename),onClick:()=>e.onSpecClick?.(r)},r.filename))),"dot"===e.renderMode&&e.spectrograms.map((r=>(0,f.jsx)(F,{position:[r.dim1*t,r.dim2*s,r.dim3*n],shape:r.shape,size:r.size,color:r.color,label:r.label,id:r.filename,showID:o.has(r.filename),onClick:()=>e.onSpecClick?.(r),isSelected:o.has(r.filename)},r.filename)))]}),(0,f.jsx)(C.N,{makeDefault:!0,minAzimuthAngle:e.controls?.minAzimuthAngle,maxAzimuthAngle:e.controls?.maxAzimuthAngle,minPolarAngle:e.controls?.minPolarAngle,maxPolarAngle:e.controls?.maxPolarAngle,maxDistance:e.controls?.maxDistance,minDistance:e.controls?.minDistance})]})})}const N={hasFocus:!1,focusedItem:null,setFocusedItem:()=>{throw Error("setFocusedItem called outside of context provider")},unsetFocus:()=>{throw Error("unsetFocus called outside of context provider")}},Y=p.createContext(N),_=e=>{const[t,s]=p.useState(N.focusedItem),n=null!=t;return(0,f.jsx)(Y.Provider,{value:{hasFocus:n,focusedItem:t,setFocusedItem:s,unsetFocus:()=>{s(null)}},children:e.children})},$=()=>p.useContext(Y);let R=function(e){return e.detailed="detailed",e.selection="selection",e}({});const U={clickMode:R.detailed,setClickMode:()=>{throw new Error("setClickMode called outside of context provider")}},Z=p.createContext(U),L=e=>{const[t,s]=p.useState(U.clickMode);return(0,f.jsx)(Z.Provider,{value:{clickMode:t,setClickMode:e=>{x(e,R,"ClickMode"),s(e)}},children:e.children})},X={spectrograms:new Map,setSpectrograms:()=>{throw Error("setSpectrograms cannot be called out of context provider")},updateSpectrogram:()=>{throw Error("updateSpectrogram cannot be called out of context provider")}},G=p.createContext(X),K=e=>{const[t,s]=p.useState(new Map(e.data?.map((e=>[e.filename,e]))??X.spectrograms));return(0,f.jsx)(G.Provider,{value:{spectrograms:t,setSpectrograms:s,updateSpectrogram:(e,t)=>{s((s=>{const n=new Map(s),o=n.get(e);if(null==o)throw new Error(`updateSpectrogram could not find id: ${e}`);return n.set(e,t(o)),n}))}},children:e.children})},H=()=>p.useContext(G)},5769:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(6704),o=s(396),r=s(1085);function i(e){const{siteConfig:t}=(0,o.A)();return(0,r.jsx)(n.A,{children:()=>e.children((e=>t.baseUrl+e),t),fallback:(0,r.jsx)("div",{children:"Loading..."})})}},8078:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/spec-demo-focus-0a3fd030d0c0d5f345fe3ac8893606b6.png"},3842:e=>{e.exports=JSON.parse('[{"filename":"A_1019.wav","dim1":"8.806847","dim2":"7.8649745","dim3":"-3.6867962","flocation":"mediterranean"},{"filename":"A_239.wav","dim1":"2.244459","dim2":"-9.016553","dim3":"-3.0456424","flocation":"mediterranean"},{"filename":"A_748.wav","dim1":"8.224354","dim2":"8.291854","dim3":"-4.2379107","flocation":"mediterranean"},{"filename":"A_530.wav","dim1":"0.27919412","dim2":"13.747222","dim3":"-0.5143788","flocation":"pacific"},{"filename":"A_1385.wav","dim1":"6.5439515","dim2":"7.1407275","dim3":"-1.268021","flocation":"pacific"},{"filename":"A_100.wav","dim1":"6.350834","dim2":"-1.6831475","dim3":"-7.348477","flocation":"pacific"},{"filename":"A_385.wav","dim1":"-1.8902831","dim2":"-10.495517","dim3":"2.0196745","flocation":"pacific"},{"filename":"A_1156.wav","dim1":"-8.455516","dim2":"-9.71007","dim3":"-0.16416316","flocation":"atlantic-ocean"},{"filename":"A_877.wav","dim1":"9.780004","dim2":"1.8381903","dim3":"-2.1159284","flocation":"atlantic-ocean"},{"filename":"A_697.wav","dim1":"11.868487","dim2":"-0.5531068","dim3":"-3.9780738","flocation":"atlantic-ocean"}]')}}]);